<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kelola Menu - Jeno Admin</title>
    <link rel="stylesheet" href="style-admin.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      /* CSS Khusus Halaman Produk untuk Layout 2 Kolom */
      .crud-wrapper {
        display: grid;
        grid-template-columns: 350px 1fr;
        gap: 30px;
        align-items: start;
      }

      .form-sticky {
        position: sticky;
        top: 30px;
        background: var(--white);
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
      }

      .img-upload-box {
        width: 100%;
        height: 120px;
        background: #f9f9f9;
        border: 2px dashed #ddd;
        border-radius: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-bottom: 15px;
        color: #888;
        transition: 0.3s;
      }

      .img-upload-box:hover {
        border-color: var(--secondary);
        color: var(--secondary);
      }

      .form-group {
        margin-bottom: 15px;
      }
      .form-group label {
        display: block;
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 5px;
        color: #555;
      }

      .form-input {
        width: 100%;
        padding: 12px;
        border: 1px solid #eee;
        border-radius: 10px;
        outline: none;
        background: #fdfdfd;
      }

      .form-input:focus {
        border-color: var(--secondary);
        box-shadow: 0 0 0 3px rgba(255, 17, 120, 0.1);
      }

      .table-card {
        background: var(--white);
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
      }

      .product-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .product-img {
        width: 45px;
        height: 45px;
        border-radius: 10px;
        object-fit: cover;
        background: #eee;
      }

      .action-btns {
        display: flex;
        gap: 8px;
      }
      .btn-icon {
        width: 35px;
        height: 35px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        cursor: pointer;
        transition: 0.2s;
      }
      .btn-edit {
        background: #fff4e5;
        color: #f39c12;
      }
      .btn-delete {
        background: #ffeaea;
        color: #ff7675;
      }
      .btn-edit:hover {
        background: #f39c12;
        color: white;
      }
      .btn-delete:hover {
        background: #ff7675;
        color: white;
      }
    </style>
  </head>
  <body>
    <aside class="sidebar">
      <div class="brand-section">
        <h2>JENO KITCHEN</h2>
      </div>

      <div class="admin-profile">
        <div class="admin-avatar-wrapper">
          <img
            src="https://ui-avatars.com/api/?name=Admin+Jeno&background=ff1178&color=fff"
            alt="Profile"
            class="admin-avatar"
          />
          <div class="online-indicator"></div>
        </div>
        <div class="admin-info">
          <h4>Selamat Datang,</h4>
          <p>Admin Jeno</p>
        </div>
      </div>

      <nav class="nav-menu">
        <a href="dashboard.html" class="nav-link"
          ><i class="fas fa-chart-line"></i> Dashboard</a
        >
        <a href="pesanan.html" class="nav-link"
          ><i class="fas fa-shopping-cart"></i> Pesanan</a
        >
        <a href="produk.html" class="nav-link active"
          ><i class="fas fa-utensils"></i> Stok & Menu</a
        >
        <a href="interaksi.html" class="nav-link"
          ><i class="fas fa-comment-dots"></i> Testimoni</a
        >
        <a href="laporan.html" class="nav-link"
          ><i class="fas fa-file-invoice-dollar"></i> Laporan</a
        >
        <a href="pengaturan.html" class="nav-link"
          ><i class="fas fa-cog"></i> Pengaturan</a
        >
        <a href="../index.html" class="nav-link logout"
          ><i class="fas fa-sign-out-alt"></i> Keluar</a
        >
      </nav>
    </aside>

    <main class="main-content">
      <header class="header">
        <h1>Manajemen Produk</h1>
        <p style="color: #888">
          Kelola inventaris stok dan daftar menu Jeno Kitchen
        </p>
      </header>

      <div class="crud-wrapper">
        <div class="form-sticky">
          <h3 style="margin-bottom: 20px; font-size: 1.1rem">
            <i class="fas fa-edit"></i> Form Produk
          </h3>
          <form id="productForm">
            <div
              class="img-upload-box"
              onclick="document.getElementById('fileInput').click()"
            >
              <i class="fas fa-camera fa-2x"></i>
              <span style="font-size: 11px; margin-top: 5px">Upload Foto</span>
              <input type="file" id="fileInput" hidden />
            </div>

            <div class="form-group">
              <label>Nama Menu</label>
              <input
                type="text"
                id="prodNama"
                class="form-input"
                placeholder="Nama Snack..."
                required
              />
            </div>

            <div class="form-group">
              <label>Harga Satuan (Rp)</label>
              <input
                type="number"
                id="prodHarga"
                class="form-input"
                placeholder="Contoh: 5000"
                required
              />
            </div>

            <div class="form-group">
              <label>Jumlah Stok</label>
              <input
                type="number"
                id="prodStok"
                class="form-input"
                placeholder="0"
                required
              />
            </div>

            <button
              type="submit"
              class="btn btn-primary"
              style="width: 100%; justify-content: center; margin-top: 10px"
            >
              <i class="fas fa-save"></i> Simpan Ke Database
            </button>
            <button
              type="reset"
              id="btnCancel"
              class="btn"
              style="
                width: 100%;
                display: none;
                margin-top: 8px;
                border: 1px solid #ddd;
              "
            >
              Batalkan Edit
            </button>
          </form>
        </div>

        <div class="table-card">
          <div
            style="
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            "
          >
            <h3 style="font-size: 1.1rem">Daftar Menu Aktif</h3>
            <input
              type="text"
              placeholder="Cari menu..."
              style="
                padding: 5px 15px;
                border-radius: 20px;
                border: 1px solid #eee;
                outline: none;
              "
            />
          </div>

          <table>
            <thead>
              <tr>
                <th>Informasi Menu</th>
                <th>Harga</th>
                <th>Stok</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="productTableBody">
              <tr id="row-1">
                <td>
                  <div class="product-info">
                    <div
                      class="product-img"
                      style="
                        background: url('https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?q=80&w=100')
                          center/cover;
                      "
                    ></div>
                    <div>
                      <b class="val-nama">Basreng Pedas</b><br />
                      <small style="color: #aaa">Camilan</small>
                    </div>
                  </div>
                </td>
                <td class="val-harga">Rp 5.000</td>
                <td><span class="badge success val-stok">45 Pcs</span></td>
                <td>
                  <div class="action-btns">
                    <button onclick="editItem(1)" class="btn-icon btn-edit">
                      <i class="fas fa-pen"></i>
                    </button>
                    <button onclick="deleteItem(1)" class="btn-icon btn-delete">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr id="row-2">
                <td>
                  <div class="product-info">
                    <div
                      class="product-img"
                      style="
                        background: url('https://images.unsplash.com/photo-1621447509323-98696e744726?q=80&w=100')
                          center/cover;
                      "
                    ></div>
                    <div>
                      <b class="val-nama">Kripca Daun Jeruk</b><br />
                      <small style="color: #aaa">Camilan</small>
                    </div>
                  </div>
                </td>
                <td class="val-harga">Rp 10.000</td>
                <td><span class="badge warning val-stok">5 Pcs</span></td>
                <td>
                  <div class="action-btns">
                    <button onclick="editItem(2)" class="btn-icon btn-edit">
                      <i class="fas fa-pen"></i>
                    </button>
                    <button onclick="deleteItem(2)" class="btn-icon btn-delete">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <script>
      const form = document.getElementById("productForm");
      const btnCancel = document.getElementById("btnCancel");

      // FUNGSI DELETE DENGAN KONFIRMASI
      function deleteItem(id) {
        if (
          confirm("Apakah Anda yakin ingin menghapus menu ini dari daftar?")
        ) {
          const row = document.getElementById(`row-${id}`);
          row.style.transition = "0.4s";
          row.style.opacity = "0";
          row.style.transform = "scale(0.9)";
          setTimeout(() => row.remove(), 400);
        }
      }

      // FUNGSI EDIT (MEMINDAHKAN DATA KE FORM)
      function editItem(id) {
        const row = document.getElementById(`row-${id}`);
        const nama = row.querySelector(".val-nama").innerText;
        const harga = row
          .querySelector(".val-harga")
          .innerText.replace("Rp ", "")
          .replace(".", "");
        const stok = row
          .querySelector(".val-stok")
          .innerText.replace(" Pcs", "");

        // Isi Form
        document.getElementById("prodNama").value = nama;
        document.getElementById("prodHarga").value = harga;
        document.getElementById("prodStok").value = stok;

        // Perubahan UI Form
        btnCancel.style.display = "block";
        form.querySelector('button[type="submit"]').innerHTML =
          '<i class="fas fa-sync"></i> Perbarui Produk';
        form.querySelector('button[type="submit"]').style.background =
          "#f39c12";

        // Scroll otomatis ke form (berguna jika tabel panjang)
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // RESET FORM KE MODE TAMBAH
      btnCancel.onclick = () => {
        form.reset();
        btnCancel.style.display = "none";
        form.querySelector('button[type="submit"]').innerHTML =
          '<i class="fas fa-save"></i> Simpan Ke Database';
        form.querySelector('button[type="submit"]').style.background =
          "var(--secondary)";
      };

      // SIMULASI SIMPAN DATA
      form.onsubmit = (e) => {
        e.preventDefault();
        alert("Data Berhasil Diproses! (Sistem Database Simulasi Aktif)");
        btnCancel.click(); // Reset form
      };
    </script>
  </body>
</html>
